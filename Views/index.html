<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pilot Portfolio - 投资组合管理平台</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
</head>
<body>
  <div class="app-container">
    <!-- 侧边栏导航 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 36C27.9411 36 36 27.9411 36 18C36 8.05887 27.9411 0 18 0C8.05887 0 0 8.05887 0 18C0 27.9411 8.05887 36 18 36Z" fill="#D4AF37"/>
            <path d="M18 30C24.6274 30 30 24.6274 30 18C30 11.3726 24.6274 6 18 6C11.3726 6 6 11.3726 6 18C6 24.6274 11.3726 30 18 30Z" fill="#D4AF37"/>
            <path d="M18 24C21.3137 24 24 21.3137 24 18C24 14.6863 21.3137 12 18 12C14.6863 12 12 14.6863 12 18C12 21.3137 14.6863 24 18 24Z" fill="#D4AF37"/>
          </svg>
          <h1>Pilot Portfolio</h1>
        </div>
      </div>
      <nav class="sidebar-nav">
        <!-- 引入收藏部分 -->
        <div id="collection-container"></div>
        
        <!-- 引入推荐部分 -->
        <div id="recommendation-container"></div>
      </nav>
      <div class="sidebar-footer">
        <a href="#" class="settings-link">设置</a>
        <a href="#" class="logout-link">退出</a>
      </div>
    </aside>

    <!-- 主内容区 -->
    <main class="main-content">
      <header class="main-header">
        <div class="search-bar">
          <input type="search" placeholder="搜索产品名称..." id="product-search">
          <button type="submit" aria-label="搜索">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <div class="user-menu">
          <div class="language-toggle">
            <button id="language-switch" class="language-btn">EN</button>
          </div>
        </div>
      </header>

      <div class="content-container">
        <!-- 引入投资组合部分 -->
        <div id="portfolio-container"></div>
        
        <!-- 引入图表部分 -->
        <div id="chart-container-wrapper"></div>
      </div>
    </main>
  </div>
  
  <!-- 产品详情浮窗 -->
  <div class="product-modal" id="product-modal">
    <div class="modal-header">
      <h3 id="modal-title">产品详情</h3>
      <button class="close-modal-btn">&times;</button>
    </div>
    <div class="modal-content">
      <div class="product-overview">
        <div class="product-basics">
          <h4 id="modal-product-name">产品名称</h4>
          <p id="modal-product-price" class="price">$0.00</p>
          <p id="modal-product-change" class="change">0.00%</p>
        </div>
        <div class="product-stats">
          <div class="stat-item">
            <span class="stat-label">开盘价</span>
            <span id="modal-open-price" class="stat-value">$0.00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">最高价</span>
            <span id="modal-high-price" class="stat-value">$0.00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">最低价</span>
            <span id="modal-low-price" class="stat-value">$0.00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">成交量</span>
            <span id="modal-volume" class="stat-value">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">市值</span>
            <span id="modal-market-cap" class="stat-value">$0.00B</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">52周高</span>
            <span id="modal-52w-high" class="stat-value">$0.00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">52周低</span>
            <span id="modal-52w-low" class="stat-value">$0.00</span>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="action-btn buy-btn">买入</button>
        <button class="action-btn sell-btn">卖出</button>
        <button class="action-btn add-to-collection-btn">添加到收藏</button>
      </div>
    </div>
  </div>
  
  <script src="../Models/main.js"></script>
  <script>
    // 加载组件的函数
    function loadComponent(url, containerId) {
      fetch(url)
        .then(response => response.text())
        .then(html => {
          document.getElementById(containerId).innerHTML = html;
        })
        .catch(error => {
          console.error(`加载组件 ${url} 失败:`, error);
        });
    }
    
    // 页面加载完成后加载所有组件
    document.addEventListener('DOMContentLoaded', () => {
      // 加载收藏部分
      loadComponent('collection.html', 'collection-container');
      
      // 加载推荐部分
      loadComponent('recommendation_chart.html', 'recommendation-container');
      
      // 加载投资组合部分
      loadComponent('portfolio.html', 'portfolio-container');
      
      // 加载图表部分 - 现在单独加载
      loadComponent('chart.html', 'chart-container-wrapper');
    });
  </script>
</body>
</html>
